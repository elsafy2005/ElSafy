<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>El Safy Store | Game Top-Up</title>
<meta name="description" content="Elsafy Store - أسرع وأأمن موقع لشحن الألعاب زي PUBG, Free Fire, Mobile Legends و 8 Ball Pool. شحن مضمون وفوري بأفضل الأسعار.">
<meta name="keywords" content="Elsafy Store, شحن ألعاب, PUBG UC, Free Fire, Mobile Legends, 8 Ball Pool, Game Top-Up">
<meta name="author" content="Elsafy Store">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
 <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<!-- الخط الإنجليزي -->
<link href="https://fonts.googleapis.com/css2?family=Bitcount+Grid+Double:wght@300&display=swap" rel="stylesheet">

<!-- الخط العربي -->
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="pubg.css" />
  <link rel="icon" type="image/png" href="images/logo.png">
  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-LS3Z6JTV3W"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-LS3Z6JTV3W');
</script>
</head>
<body>
  <div id="loading">
    <div class="loader">
      <span></span>
      <span></span>
      <span></span>
    </div>
  </div>
  <!-- HEADER -->
  <div class="header">
    <img class="logo" src="images/logo.png" alt="Logo" />
    <div class="header-links">
      <a href="index.html">Home</a>
      <a href="Contact.HTML">Contact</a>
      <a href="About.html">About</a>
    </div>
  </div>
  <div class="delivery-note">
  ⚡ Shipping takes from 2 minutes to 2 hours!
</div>


  <div class="container">
    <h1>تحديد الكمية</h1>

<div class="packages">
  <div class="package-card" onclick="selectPackage('60 UC', this)">
    <img src="images/uc.png" alt="60 UC">
    <h3>60 UC</h3>
    <p>55 جنيه</p>
  </div>

  <div class="package-card" onclick="selectPackage('325 UC', this)">
    <img src="images/uc.png" alt="325 UC">
    <h3>325 UC</h3>
    <p>260 جنيه</p>
  </div>

  <div class="package-card" onclick="selectPackage('660 UC', this)">
    <img src="images/uc.png" alt="660 UC">
    <h3>660 UC</h3>
    <p>465 جنيه</p>
  </div>

  <div class="package-card" onclick="selectPackage('1800 UC', this)">
    <img src="images/uc.png" alt="1800 UC">
    <h3>1800 UC</h3>
    <p>1200 جنيه</p>
  </div>

  <div class="package-card" onclick="selectPackage('3850 UC', this)">
    <img src="images/uc.png" alt="3850 UC">
    <h3>3850 UC</h3>
    <p>2250 جنيه</p>
  </div>

  <div class="package-card" onclick="selectPackage('8100 UC', this)">
    <img src="images/uc.png" alt="8100 UC">
    <h3>8100 UC</h3>
    <p>4400 جنيه</p>
  </div>

  <div class="package-card" onclick="selectPackage('16200 UC', this)">
    <img src="images/uc.png" alt="16200 UC">
    <h3>16200 UC</h3>
    <p>8700 جنيه</p>
  </div>
</div>


 <div id="transferForm" class="hidden">
  <h2>بيانات التحويل</h2>
  <p>الرجاء تحويل المبلغ إلى الرقم التالي:</p>
  <div class="transfer-info">
    <img src="images/cash.png" alt="Vodafone Cash" class="vodafone-logo">
    <span class="transfer-number">01060842931</span>
  </div>



<form id="orderForm">
  <label for="sender-number">رقم الهاتف الذي تم التحويل منه:</label>
  <input
  type="text"
  id="sender-number"
  name="sender_number"
  required
  inputmode="numeric"
  pattern="[0-9]*"
  oninput="this.value = this.value.replace(/[^0-9]/g, '')"
  placeholder="ادخل رقم الهاتف المرسل منه"
/>


  <label for="pubg-id">ID PUBG:</label>
<input
  type="text"
  id="pubg-id"
  name="pubg_id"
  required
  inputmode="numeric"
  pattern="[0-9]*"
  oninput="this.value = this.value.replace(/[^0-9]/g, '')"
  placeholder="مثلاً: 5221122334"
/>


  <input type="hidden" id="package-name" name="package_name" />

  <button type="submit">إرسال الطلب</button>
</form>

    </div>
  </div>


<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.1/firebase-app.js";
  import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.13.1/firebase-auth.js";

  const firebaseConfig = {
    apiKey: "AIzaSyC-Vi_4C3rZ-ZWwuKZgRHF40WPddR2JCvQ",
    authDomain: "elsafy-store.firebaseapp.com",
    projectId: "elsafy-store",
    storageBucket: "elsafy-store.firebasestorage.app",
    messagingSenderId: "517856691965",
    appId: "1:517856691965:web:a3ba8b4e89ad8d8e8d2094",
    measurementId: "G-H5Y50LG1DS"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);

  const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbxK-sx5sRflYa8O0rfLWJSTVrQ6E9TXyh_GCW_UTVVs72MDUsjbhxPywGt6kSPG5zvWWw/exec"; 
  const GAME_NAME = "Pubg Mobile"; 

  let selectedPackage = '';

  document.getElementById("orderForm").addEventListener("submit", async function (e) {
    e.preventDefault();

    if (selectedPackage === '') {
      alert("❌ لازم تختار باقة");
      return;
    }

    const submitButton = e.target.querySelector("button[type='submit']");
    submitButton.disabled = true;
    submitButton.innerText = "جاري الإرسال...";

    const user = auth.currentUser;
    if (!user) {
      alert("⚠️ لازم تسجل دخول الأول");
      submitButton.disabled = false;
      submitButton.innerText = "إرسال الطلب";
      return;
    }

    const formData = new FormData();
    formData.append("uid", user.uid); // 🟢 ربط الطلب بالمستخدم
    formData.append("phone", document.getElementById("sender-number").value);
    formData.append("pubg_id", document.getElementById("pubg-id").value);
    formData.append("package", selectedPackage);
    formData.append("game", GAME_NAME);

    fetch(SCRIPT_URL, {
      method: "POST",
      body: formData
    })
    .then(() => {
      window.location.href = "thanks.html";
    })
    .catch(err => {
      alert("❌ خطأ أثناء الإرسال");
      console.error(err);
      submitButton.disabled = false;
      submitButton.innerText = "إرسال الطلب";
    });
  });
</script>







  <script>
    window.addEventListener("load", () => {
      setTimeout(() => {
        document.getElementById("loading").classList.add("hidden");
      }, 1400); // ثانية و7 أعشار
    });
  </script>


  <footer class="site-footer">
  <div class="footer-content">
    <p>© 2025 جميع الحقوق محفوظة - <span> El Safy Store </span> 💙</p>
  </div>
</footer>
</body>
</html>
